window._cardGeneratorInitialized||(window._cardGeneratorInitialized=!0,chrome.runtime.onMessage.addListener((function(e,r,t){if(console.log("content script收到消息:",e),"CREATE_CARD"===e.type)return chrome.storage.local.set({selectedText:e.text},(function(){console.log("文本已保存到storage:",e.text),chrome.runtime.lastError&&console.error("保存文本错误:",chrome.runtime.lastError),chrome.runtime.sendMessage({type:"OPEN_EDITOR"},(function(e){chrome.runtime.lastError&&console.error("发送OPEN_EDITOR错误:",chrome.runtime.lastError)}))})),t({received:!0}),!0})),document.addEventListener("keydown",(function(e){if(e.ctrlKey&&e.shiftKey&&"Y"===e.key){var r=window.getSelection().toString();r&&chrome.storage.local.set({selectedText:r},(function(){chrome.runtime.sendMessage({type:"OPEN_EDITOR"})}))}})));